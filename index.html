<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Batas frontend environment</title>
    <link rel="stylesheet" href="styles/css/main.css">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700" rel="stylesheet">
    <script
        src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
        crossorigin="anonymous">
    </script>
</head>
<body>
    <header>
        <div class="logo">
            <img src="img/logo.png" alt="logo must be there">
        </div>
        <div class="header-data">
            <h2>Battery AutoShop</h2>
            <h4>Find energy here</h4>
            <p>Моментальный магазин батареек</p>
        </div>
        <small class="burger"></small>
    </header>
        
    <main>
        <div class="map" id="map" >
        </div>
    </main>
    <footer>
        <div class="logo">
            <img src="img/logo.png" alt="logo must be there">
        </div>
        <div class="footer-links">
            <a href="#">Как купить</a>
            <a href="#">Оплата и Получение</a>
            <a href="#">Контакты и Поддержка</a>
            <a href="about.html">О Проекте</a>
        </div>
    </footer> 
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
    <script src="scripts/circle-btn.js"></script>
    <script>    
        
        
        ymaps.ready(function init(){


            let dataMap = {
            type: "FeatureCollection",
            features: [{
                id: 01,
                type: 'Feature',
                geometry: {
                    type: 'Point',
                    coordinates: [55.813760, 37.479642]
                },
                properties: {
                    hintContent: 'Battery must be there',
                    balloonContent: '<p class="test">content content content</p>',
                    clusterCaption: "<strong><s>Еще</s> одна</strong> метка",
                    // hintContent: "<strong>Текст  <s>подсказки</s></strong>"
                },
                options: {
                    iconLayout: 'default#imageWithContent',
                    // Своё изображение иконки метки.
                    iconImageHref: 'img/batt.png',
                    // Размеры метки.
                    iconImageSize: [48, 48],
                    // Смещение левого верхнего угла иконки относительно
                    // её "ножки" (точки привязки).
                    iconImageOffset: [-24, -24],
                    // Смещение слоя с содержимым относительно слоя с картинкой.
                    iconContentOffset: [15, 15],
                    // Макет содержимого.
                    
                }
            },
            {
                id: 02,
                type: 'Feature',
                geometry: {
                    type: 'Point',
                    coordinates: [55.813415, 37.477250]
                },
                properties: {
                    hintContent: 'Battery must be there',
                    balloonContent: '<p class="test">content content content</p>',
                    clusterCaption: "<strong><s>Еще</s> одна</strong> метка",
                    // hintContent: "<strong>Текст  <s>подсказки</s></strong>"
                },
                options: {
                    iconLayout: 'default#imageWithContent',
                    // Своё изображение иконки метки.
                    iconImageHref: 'img/batt.png',
                    // Размеры метки.
                    iconImageSize: [48, 48],
                    // Смещение левого верхнего угла иконки относительно
                    // её "ножки" (точки привязки).
                    iconImageOffset: [-24, -24],
                    // Смещение слоя с содержимым относительно слоя с картинкой.
                    iconContentOffset: [15, 15],
                    // // Макет содержимого.
                    
                }
            },
            {
                id: 03,
                type: 'Feature',
                geometry: {
                    type: 'Point',
                    coordinates: [55.812896, 37.480085]
                },
                properties: {
                    hintContent: 'Battery must be there',
                    balloonContent: '<p class="test">content content content</p>',
                    clusterCaption: "<strong><s>Еще</s> одна</strong> метка",
                    // hintContent: "<strong>Текст  <s>подсказки</s></strong>"
                },
                options: {
                    iconLayout: 'default#imageWithContent',
                    // Своё изображение иконки метки.
                    iconImageHref: 'img/batt.png',
                    // Размеры метки.
                    iconImageSize: [48, 48],
                    // Смещение левого верхнего угла иконки относительно
                    // её "ножки" (точки привязки).
                    iconImageOffset: [-24, -24],
                    // Смещение слоя с содержимым относительно слоя с картинкой.
                    iconContentOffset: [15, 15],
                    // Макет содержимого.
                    
                }
            },
            {
                id: 04,
                type: 'Feature',
                geometry: {
                    type: 'Point',
                    coordinates: [55.814793, 37.478859]
                },
                properties: {
                    hintContent: 'Battery must be there',
                    balloonContent: '<p class="test">content content content</p>',
                    clusterCaption: "<strong><s>Еще</s> одна</strong> метка",
                    // hintContent: "<strong>Текст  <s>подсказки</s></strong>"
                },
                options: {
                    iconLayout: 'default#imageWithContent',
                    // Своё изображение иконки метки.
                    iconImageHref: 'img/batt.png',
                    // Размеры метки.
                    iconImageSize: [48, 48],
                    // Смещение левого верхнего угла иконки относительно
                    // её "ножки" (точки привязки).
                    iconImageOffset: [-24, -24],
                    // Смещение слоя с содержимым относительно слоя с картинкой.
                    iconContentOffset: [15, 15],
                    // Макет содержимого.
                    
                }
            }],

        }


            const myMap = new ymaps.Map("map", {
                center: [55.76, 37.64],
                zoom: 13,
                controls: []
            });
            //Adding custom controll btns to map;
            mapControls();
            //Adding on map clasters
            clasterise();

            
            function clasterise (){
                objectManager = new ymaps.ObjectManager({
                    clusterize: true,
                    gridSize: 32,
                    clusterDisableClickZoom: true
                });
                objectManager.objects.options.set('preset', 'islands#blueDotIcon');
                objectManager.clusters.options.set('preset', 'islands#blueDotIcon');
                myMap.geoObjects.add(objectManager);
                objectManager.add(dataMap);
            }
            function mapControls(){
                let zoomControl = new ymaps.control.ZoomControl({
                    options: {
                        layout: 'round#zoomLayout',
                        position: {
                            right: '0px',
                            top: '200px'
                        }
                    }
                });
                myMap.controls.add(zoomControl);

                let geolocationControl = new ymaps.control.GeolocationControl({
                    options: {
                        layout: 'round#buttonLayout',
                        position: {
                            bottom: '30px',
                            right: '10px'
                        }
                    }
                });
                myMap.controls.add(geolocationControl);
                
                let fullScreenCtrl = new ymaps.control.FullscreenControl({
                    data: {
                        image: 'img/icons/full-screen.png',
                        title: 'Полный экран'
                    },
                    options: {
                        layout: 'round#buttonLayout'
                    }
                })
                myMap.controls.add(fullScreenCtrl);
                
                myMap.controls.add('searchControl', {
                    position: {
                        left: '5px',
                        top: '5px'
                    }
                });

                let typeSelector = new ymaps.control.TypeSelector({
                    options: {
                        layout: 'round#listBoxLayout',
                        itemLayout: 'round#listBoxItemLayout',
                        itemSelectableLayout: 'round#listBoxItemSelectableLayout',
                        float: 'none',
                        position: {
                            bottom: '40px',
                            left: '10px'
                        }
                    }
            });
            myMap.controls.add(typeSelector);
        }
        });
        
        $('.burger').on('click', ()=>{
            $('.burger').toggleClass('--active');
            $('footer').toggleClass('foo-active');
        });
    </script>   
</body>
</html>